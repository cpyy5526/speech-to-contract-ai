# 프롬프트 개발 진행상황 및 방향

다른 의견이 있거나 이해되지 않는 부분이 있다면 댓글 달아주세요.

## 우리 프로젝트의 프롬프트 엔지니어링 범위

1. 대화 텍스트 정제
    - GPT가 대화 텍스트를 제대로 이해하고 에러 가능성을 줄이기 위해 입력 정제
    - 예: 화자 분리(A: … B: … 등과 같이 말하는 사람 구분), 대화 요약 및 재구성 (분량이 너무 긴 경우, 계약과 관련된 내용 위주의 짧은 대화로 재구성)
2. 계약 유형 분류
    - **각 계약 유형의 판단 기준에 따라** GPT가 **대화의 맥락**을 고려하고 적절한 유형을 판단하도록 유도
3. 분류된 계약 유형에 대한 키워드 추출
    - 판단한 **계약 유형의 기준에 따라** 대화 텍스트에서 계약서 작성에 필요한 키워드 추출
4. 출력 형식 제한
    - 백엔드에서 자동으로 결과를 추출하기 위해, GPT가 임의의 형식으로 답변하지 못하도록, 정형화한 JSON에 맞추도록 답변의 정보 배치 강제
5. 공란 처리 및 제안
    - **계약 유형의 판단 기준에서** 정의할 수 없는 키워드는 결과에서 빈 값으로 처리하도록 유도
    - **정해진 형식에서**(프론트엔드 구현을 고려해서) ****법률정보 제안 텍스트 생성

## 현재 진행상황 고찰

**모듈 구성 및 설계** 페이지의 코드를 자세히 살펴보니, 아직은 위의 4번만 완료했다고 보는 게 맞을 것 같습니다.

- 계약 유형 별 키워드 JSON에 맞게 GPT가 답변을 하도록 제한하는 ‘표면적인 프롬프트 엔지니어링’은 완성
- GPT가 계약 유형을 **어떻게** 구분하는 지에 대해서는 구체적으로 지시하지 않음
- “다음 중 대화가 해당하는 것을 선택: 고용, 매매, …” 과 같은 정도로만 지시함
- ‘어떤 것들이 이런 식으로 언급되어 있으면 이러한 계약 유형이다’와 같이 **실제 법적인 판단 기준**을 조금이라도 제시해서 GPT의 **판단 기준을 통제**해야 함
- 현재 방식에서는 GPT가 입력 대화의 **일반적인 맥락**에 따라 각 계약 유형의 **이름(단어)**만 보고 판단할 가능성 높음
    - ‘고용’, ‘매매’ 등과 같은 **단어 자체의 일반적인 사전적 의미만을 고려**할 가능성이 높아짐
    - 멘토님이 지난 회의에서 법 및 계약에서의 단어는 일상적으로 사용될 때와 다른 경우로 해석되는 경우가 많다고 언급한 걸 고려하면 이 부분은 특히 문제가 될 수 있음
- 키워드 추출 역시 비슷한 문제점이 있음
    - GPT는 각 키워드의 필드명만을 보고 대화에서 해당하는 것을 추출함 (예: “property”, “sale_price”)
    - 이 경우 역시 **필드명 자체의 일반적인 의미**를 기준으로 GPT가 판단 및 추출할 가능성이 높음
    - 실제로는 “’매매 금액’이란 갑이 을에 …하는 것을 의미한다”와 같은 법적 배경을 참고해서 명확한 법적 기준도 제시하고 그에 따라 추출하도록 유도해야 함
- 계약 유형이 잘못 판단된 경우에도 GPT는 어떻게든 그 JSON에 맞춰 추출 자체는 하게 됨
    - 극단적인 예를 들면, 부동산 관련 계약을 근로계약으로 판단하고 급여를 시간당 10억원으로 추출할 수도 있음
    - 이 문제는 사실 ‘계약서를 일단 만들어내는 데 집중하는’ 이번 주제의 범위를 벗어나는 면은 있으나, 보완 과정에서 생각해볼 수 있는 문제

<aside>

- 지금의 코드 자체는 어떤 대화 텍스트를 입력으로 주든 JSON 결과 자체는 출력으로 나오게 되어 있으니, 지난 회의에서 ‘이미 거의 다 진행해버렸다’라는 오해가 생겼던 것 같습니다.
- 하지만 이렇게 따지고 보면 멘토님의 요구사항이나 수행계획서를 제대로 구현했다기에는 아직 많은 과제가 남아 있습니다.
- 비유하자면, 알고리즘 실습 과제에서 예시 출력을 하드코딩해서 ‘일단 출력 자체는 그럴듯해 보이는’ 상황입니다. 보통 이때 정작 ‘실제 입력’을 주면 ‘맞다고 하기엔 무리가 있는’ 값이 나올 가능성이 높은 것과 같습니다.
</aside>

<aside>

- 초기에 역할을 분배할 때, 제가 프롬프트 파트도 백엔드나 프론트엔드처럼 ‘설계→구현’으로 생각해서 지금의 진행상황이 예상과 다르다고 느껴지는 부분도 있는 것 같습니다.
- 프롬프트 엔지니어링은 실제로 진행하고 보니 ‘구현→모듈화(함수화)’에 더 가까운 것 같습니다.
- 지금까지의 과정도 사실 ‘GPT의 답변 형식을 통제하는’ 프롬프트 엔지니어링의 한 단계중 하나라고 볼 수 있는데, ‘설계’였다고 생각해서 “막상 진행해보니 벌써 다 해버렸다”고 인식하게 된 것 같습니다.
- 프롬프트 개발은 통합하기 전까지 계속 ‘구현(보완)’을 해 나가다가 배포 전에 통합하는 식으로 진행될 것 같습니다.
- 멘토님과의 논의 및 프롬프트 수정 등 끝까지 해 나가야 할 일들은 비정기적으로 있지만, 개발 자체로 보면 업무 부담은 다른 역할에 비해 가벼울 것 같습니다.
</aside>

## 앞으로의 방향 제안

- 백엔드 및 프론트엔드를 위한 출력을 통제하는 데까지는 성공했고, 이제부터는 **실제 계약 체계에 맞춰** 프롬프트를 제대로 완성해야 하는 단계입니다.
- 계약 유형 판단 기준과 각 키워드의 의미를 실제 법적 배경을 따져가며 진행해야 하므로, 멘토님과의 논의 및 조율을 여러 번 거치면서 진행해야 할 것 같습니다.
    - 법학 과제가 아니라 개발 프로젝트이기 때문에 법 체계를 완벽하게 적용하는 데 집중할 필요는 없지만, 적어도 실제 법 체계를 조금이라도 반영해야 ‘계약서를 생성하는 프로젝트’의 의미가 있을 것 같습니다.
- 개발 업무 자체는 일정하지 않고 가벼운 면이 있으므로, 한 명씩 프론트 및 백엔드 역할의 일정 부분을 추가적으로 맡는 게 좋을 것 같습니다.
- 계약서 정형화를 진행하면서 계약서 데이터 자체에 대한 이해를 더 갖추고 계시니, 계약서 자체와 관련되는 작업을 담당하는 게 좋을 것 같습니다.
    - 프론트엔드 예: 계약서 레이아웃 및 디자인, 계약서 개별 필드 편집 UI
    - 백엔드 예: API 설계-"3. 계약서 관리", 계약서 DB 설계 및 구현